import{r as t,d as h,u as k,g as A,c as v,o as d,F as x,k as B,i as C,j as U,n as j,h as z,y as D,U as g,f as m}from"./main-BjdMJabl.js";import{f as F}from"./frame-32SrAqKr.js";import"./length-AdkHSc9u.js";const i=t(null);function L(){function o(e){i.value=e}function u(){i.value=null}return{currentDragId:i,startDrag:o,endDrag:u}}const O=["draggable","id"],V=h({__name:"UiDnDArea",props:{ui:{}},emits:["drop-success"],setup(o,{emit:u}){const e=o,c=u,n=t(!1),s=t(!1),l=t(!1),f=k(),{currentDragId:p,startDrag:b,endDrag:y}=L(),I=A(()=>F(e.ui.frame).join(";"));function _(a){a.dataTransfer&&(l.value=!0,e.ui.id&&(b(e.ui.id),a.dataTransfer.setData("application/x-drag-id",e.ui.id)),a.dataTransfer.effectAllowed="move",a.dataTransfer.dropEffect=s.value?"move":"none")}function S(a){n.value=!0;const r=p.value;e.ui.dnD?.droppableIDs?s.value=!!r&&e.ui.dnD?.droppableIDs.value.includes(r):s.value=!0,s.value?a.dataTransfer.dropEffect="move":a.dataTransfer.dropEffect="none",document.body.style.cursor=s.value?"grab":"not-allowed"}function w(){n.value=!1,s.value=!1,l.value=!1,document.body.style.cursor="default"}function E(a){const r=p.value;n.value=!1,s.value=!1,l.value=!1,document.body.style.cursor="default",e.ui.dnD?.droppableIDs?r&&e.ui.dnD?.droppableIDs?.value.includes(r)&&(c("drop-success",r),f.sendEvent(new g(e.ui.droppedId,0,m(),r))):r&&(c("drop-success",r),f.sendEvent(new g(e.ui.droppedId,0,m(),r))),y()}return(a,r)=>(d(),v("div",{onDragover:D(S,["prevent"]),onDrop:D(E,["prevent"]),onDragleave:w,style:z(I.value),draggable:a.ui.dnD?.canDrag,onDragstart:_,id:e.ui.id,class:j({"border border-green-500 bg-green-50 cursor-move":n.value&&s.value,"border border-red-400 bg-red-50 border cursor-not-allowed":n.value&&!s.value})},[(d(!0),v(x,null,B(e.ui.children?.value,T=>(d(),C(U,{ui:T},null,8,["ui"]))),256))],46,O))}});export{V as default};
