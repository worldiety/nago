import{c as d,o as c,b as G,d as le,u as re,G as K,r as m,g as b,K as o,C as x,H as R,w as F,a as y,s as h,t as ue,v as M,j as N,e as S,h as A,I as z,q as B,U as _,f as w}from"./main-CAxir9G8.js";import{i as se,_ as oe}from"./InputWrapper.vue_vue_type_style_index_0_lang-DPXSiHcW.js";import{f as de}from"./frame-BFmZ95SY.js";import"./closeBold-CbIJo8L_.js";import"./length-CE-uc3jn.js";const ce={xmlns:"http://www.w3.org/2000/svg","xml:space":"preserve",viewBox:"0 0 24 24"};function pe($,t){return c(),d("svg",ce,t[0]||(t[0]=[G("path",{fill:"currentColor",d:"M23.25 23.999a.743.743 0 0 1-.53-.22L12 13.06 1.28 23.779a.744.744 0 0 1-1.06 0 .752.752 0 0 1 0-1.061l10.72-10.72L.22 1.279C.078 1.138 0 .949 0 .749S.078.36.22.219c.141-.142.33-.22.53-.22s.389.078.53.22L12 10.938 22.72.218a.744.744 0 0 1 1.06 0 .747.747 0 0 1 0 1.061l-10.72 10.72 10.72 10.72a.752.752 0 0 1 0 1.061.746.746 0 0 1-.53.219"},null,-1)]))}const fe={render:pe},ve={class:"relative"},ye=["id","disabled","inputmode"],ge=["id","disabled","rows"],ke=le({__name:"UiTextField",props:{ui:{}},setup($){const t=$,k=re(),C=K("leadingElement"),O=K("trailingElement"),D=K("clearButton"),p=m(!1),l=m(t.ui.value?I(t.ui.value):"");let T=0;const f=m(),j=m("auto"),H=b(()=>de(t.ui.frame).join(";")),g=b(()=>t.ui.id?t.ui.id:"tf-"+t.ui.inputValue),q=b(()=>{switch(t.ui.keyboardOptions?.keyboardType){case o.KeyboardInteger:return"numeric";case o.KeyboardFloat:return"decimal";case o.KeyboardEMail:return"email";case o.KeyboardPhone:return"tel";case o.KeyboardURL:return"url";case o.KeyboardSearch:return"search"}return"text"});function V(e){if(e==="")return"0";const n=e.lastIndexOf("-")>=0,a=e.split(/[,.]/);for(let i=0;i<a.length;i++)a[i]=a[i].replaceAll(/\D/g,""),a[i]=a[i].replaceAll(/^0+/g,"");const s=a.length>1?a.pop():void 0,r=a.join("");let u=r===""?"0":r;return u+=s===void 0||s===""?"":"."+s,u=n?"-"+u:u,u}function J(e,n=!1){const a=e.indexOf("-")>=0&&e.indexOf("-")===e.lastIndexOf("-"),s=te()?",":".",r=e.split(/[,.]/),u=r.length>1?r.pop()?.replaceAll(/\D/g,""):void 0;let i=r.join("").replaceAll(/\D/g,"");return i=/^0+$/g.test(i)?"0":i.replaceAll(/^0+/g,""),u===""&&n?i+=s:u&&u.length>0&&(i+=s+u),i===""?i=n?"":"0":i=a?"-"+i:i,i}function Q(e){const n=e.lastIndexOf("-")>=0;let a=e.replace(/\D/g,"");return a===""?a="0":a=n?"-"+a:a,a}function X(e,n=!1){const a=e.lastIndexOf("-")>=0,s=e.split("");let r="";for(let u=0;u<s.length;u++){const i=s[u];/\D/g.test(i)||(r!==""||i!=="0")&&(r+=i)}return r===""?r=n?"":"0":r=a?"-"+r:r,r}function E(e){switch(t.ui.keyboardOptions?.keyboardType){case o.KeyboardInteger:return Q(e);case o.KeyboardFloat:return V(e);default:return e}}function I(e){let n;switch(t.ui.keyboardOptions?.keyboardType){case o.KeyboardInteger:n=X(e,!p.value);break;case o.KeyboardFloat:n=J(e,!p.value);break;default:n=e}return p.value=!1,n}const L=b(()=>{const e=[];switch(t.ui.textAlignment){case x.TextAlignStart:e.push("text-align: start");break;case x.TextAlignEnd:e.push("text-align: end");break;case x.TextAlignCenter:e.push("text-align: center");break;case x.TextAlignJustify:e.push("text-align: justify","text-justify: inter-character");break}if(t.ui.style==R.TextFieldBasic)return e.push("display:inline","background:unset"),e.join(";");const n=C.value?.offsetWidth,a=n?`${n}px`:"auto";let s;const r=O.value?.offsetWidth;if(r!==void 0)s=`${r}px`;else{const u=D.value?.offsetWidth;s=u?`${u}px`:"auto"}return t.ui.lines&&e.push(`height: ${j.value}`),e.push("padding-left:"+a,"padding-right:"+s),e.join(";")});F(l,(e,n)=>{if(e==n)return;const a=I(e);l.value!=a&&(l.value=a)}),F(()=>t.ui.value,e=>{document.getElementById(g.value)!==document.activeElement&&(p.value=!0,l.value=e||"")}),F(()=>t.ui,e=>{document.getElementById(g.value)!==document.activeElement&&(p.value=!0,l.value=e.value?e.value:"")});function W(e){if(e.stopPropagation(),t.ui.lines){if(!t.ui.keydownEnter||e.shiftKey)return;e.preventDefault()}Z()}function Y(){if(!f.value)return;const e=getComputedStyle(f.value),n=window.parseFloat(V(e.getPropertyValue("border-top-width"))),a=window.parseFloat(V(e.getPropertyValue("border-bottom-width")));f.value.style.height="auto";const s=f.value.scrollHeight+n+a;f.value.style.height=`${s}px`,j.value=`${s}px`}function Z(){if(!t.ui.keydownEnter)return;const e=E(l.value);k.sendEvent(new _(t.ui.inputValue,t.ui.keydownEnter,w(),e)),clearTimeout(T)}function ee(e){Y(),v(e)}function v(e,n=0){const a=E(l.value);if(a!=t.ui.value){if(w(),e||t.ui.disableDebounce){k.sendEvent(new _(t.ui.inputValue,n,w(),a));return}ie()}}function P(){return t.ui.keyboardOptions?.keyboardType==o.KeyboardInteger||t.ui.keyboardOptions?.keyboardType==o.KeyboardFloat}function te(){return navigator.language.split("-")[0].toLowerCase()==="de"}function ne(){l.value===""&&P()?l.value="0":(p.value=!0,l.value=I(l.value)),v(!0)}function U(){l.value=P()?"0":"",v(!0)}function ae(e){return e/1e6}function ie(){let e=500;t.ui.debounceTime&&t.ui.debounceTime>0&&(e=ae(t.ui.debounceTime)),clearTimeout(T),T=window.setTimeout(()=>{const n=E(l.value);n!=t.ui.value&&k.sendEvent(new _(t.ui.inputValue,0,w(),n))},e)}return(e,n)=>e.ui.invisible?y("",!0):(c(),d("div",{key:0,style:A(H.value)},[h(oe,{"wrapper-style":B(se)(t.ui.style),label:t.ui.label,error:t.ui.errorText,help:t.ui.supportingText,disabled:t.ui.disabled},{default:ue(()=>[G("div",ve,[t.ui.leading?(c(),d("div",{key:0,ref_key:"leadingElement",ref:C,class:"absolute inset-y-0 left-0 pl-2 pr-1 flex items-center pointer-events-none"},[h(N,{ui:t.ui.leading},null,8,["ui"])],512)):y("",!0),t.ui.lines?y("",!0):M((c(),d("input",{key:1,id:g.value,"onUpdate:modelValue":n[0]||(n[0]=a=>l.value=a),class:"input-field",style:A(L.value),disabled:t.ui.disabled,type:"text",inputmode:q.value,onKeydown:S(W,["enter"]),onFocusout:ne,onInput:n[1]||(n[1]=a=>v(!1))},null,44,ye)),[[z,l.value]]),t.ui.lines?M((c(),d("textarea",{key:2,ref_key:"textarea",ref:f,id:g.value,"onUpdate:modelValue":n[2]||(n[2]=a=>l.value=a),class:"input-field",style:A(L.value),disabled:t.ui.disabled,type:"text",rows:t.ui.lines,onKeydown:S(W,["enter"]),onFocusout:n[3]||(n[3]=a=>v(!0)),onInput:n[4]||(n[4]=a=>ee(!1))},null,44,ge)),[[z,l.value]]):y("",!0),t.ui.trailing?(c(),d("div",{key:3,ref_key:"trailingElement",ref:O,class:"absolute inset-y-0 right-0 pr-2 pl-1 flex items-center pointer-events-none"},[h(N,{ui:t.ui.trailing},null,8,["ui"])],512)):l.value&&!t.ui.disabled&&!t.ui.lines&&t.ui.style!=B(R).TextFieldBasic?(c(),d("div",{key:4,ref_key:"clearButton",ref:D,class:"absolute inset-y-0 right-0 pr-2 pl-1 flex items-center"},[h(B(fe),{class:"w-4",tabindex:"-1",onClick:U,onKeydown:S(U,["enter"])})],512)):y("",!0)])]),_:1},8,["wrapper-style","label","error","help","disabled"])],4))}});export{ke as default};
