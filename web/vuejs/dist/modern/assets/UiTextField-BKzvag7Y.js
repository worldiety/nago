import{c,o as p,b as Q,d as me,u as ye,G as $,r as B,g as w,K as o,C as k,H,w as A,m as ge,a as v,s as V,t as ve,v as q,j as Y,e as b,z as Z,h as O,I as J,q as _,U as C,f as T}from"./main-_o4YSdfP.js";import{i as be,_ as he}from"./InputWrapper.vue_vue_type_style_index_0_lang-F88tX4JR.js";import{f as xe}from"./frame-BFmZ95SY.js";import"./closeBold-CYGiDDfi.js";import"./length-CE-uc3jn.js";const we={xmlns:"http://www.w3.org/2000/svg","xml:space":"preserve",viewBox:"0 0 24 24"};function ke(D,t){return p(),c("svg",we,t[0]||(t[0]=[Q("path",{fill:"currentColor",d:"M23.25 23.999a.743.743 0 0 1-.53-.22L12 13.06 1.28 23.779a.744.744 0 0 1-1.06 0 .752.752 0 0 1 0-1.061l10.72-10.72L.22 1.279C.078 1.138 0 .949 0 .749S.078.36.22.219c.141-.142.33-.22.53-.22s.389.078.53.22L12 10.938 22.72.218a.744.744 0 0 1 1.06 0 .747.747 0 0 1 0 1.061l-10.72 10.72 10.72 10.72a.752.752 0 0 1 0 1.061.746.746 0 0 1-.53.219"},null,-1)]))}const Ve={render:ke},Te={class:"relative"},Ie=["id","disabled","inputmode","onKeydown"],Ee=["id","disabled","rows"],Ae=me({__name:"UiTextField",props:{ui:{}},setup(D){const t=D,I=ye(),M=$("leadingElement"),W=$("trailingElement"),j=$("clearButton"),E=!!t.ui.showZero,h=t.ui.step||0,u=B(t.ui.value?s(t.ui.value):"");let K=0;const f=B(),L=B("auto"),X=w(()=>xe(t.ui.frame).join(";")),g=w(()=>t.ui.id?t.ui.id:"tf-"+t.ui.inputValue),ee=w(()=>{switch(t.ui.keyboardOptions?.keyboardType){case o.KeyboardInteger:return"numeric";case o.KeyboardFloat:return"decimal";case o.KeyboardEMail:return"email";case o.KeyboardPhone:return"tel";case o.KeyboardURL:return"url";case o.KeyboardSearch:return"search"}return"text"});function x(e){if(e==="")return"0";const n=e.lastIndexOf("-")>=0,i=e.split(/[,.]/);for(let y=0;y<i.length;y++)i[y]=i[y].replaceAll(/\D/g,""),i[y]=i[y].replaceAll(/^0+/g,"");const r=i.length>1?i.pop():void 0,l=i.join("");let a=l===""?"0":l;return a+=r===void 0||r===""?"":"."+r,a=n?"-"+a:a,a}function te(e){const n=e.indexOf("-")>=0&&e.indexOf("-")===e.lastIndexOf("-"),i=se()?",":".",r=e.split(/[,.]/),l=r.length>1?r.pop()?.replaceAll(/\D/g,""):void 0;let a=r.join("").replaceAll(/\D/g,"");return a=/^0+$/g.test(a)?"0":a.replaceAll(/^0+/g,""),l===""&&!E?a+=i:l&&l.length>0&&(a+=i+l),a===""?a=E?"0":"":a=n?"-"+a:a,a}function U(e){const n=e.lastIndexOf("-")>=0;let i=e.replace(/\D/g,"");return i===""?i="0":i=n?"-"+i:i,i}function ne(e){const n=e.lastIndexOf("-")>=0,i=e.split("");let r="";for(let l=0;l<i.length;l++){const a=i[l];/\D/g.test(a)||(r!==""||a!=="0")&&(r+=a)}return r===""?r=E?"0":"":r=n?"-"+r:r,r}function F(e){switch(t.ui.keyboardOptions?.keyboardType){case o.KeyboardInteger:return U(e);case o.KeyboardFloat:return x(e);default:return e}}function s(e){let n;switch(t.ui.keyboardOptions?.keyboardType){case o.KeyboardInteger:n=ne(e);break;case o.KeyboardFloat:n=te(e);break;default:n=e}return n}const P=w(()=>{const e=[];switch(t.ui.textAlignment){case k.TextAlignStart:e.push("text-align: start");break;case k.TextAlignEnd:e.push("text-align: end");break;case k.TextAlignCenter:e.push("text-align: center");break;case k.TextAlignJustify:e.push("text-align: justify","text-justify: inter-character");break}if(t.ui.style==H.TextFieldBasic)return e.push("display:inline","background:unset"),e.join(";");const n=M.value?.offsetWidth,i=n?`${n}px`:"auto";let r;const l=W.value?.offsetWidth;if(l!==void 0)r=`${l}px`;else{const a=j.value?.offsetWidth;r=a?`${a}px`:"auto"}return t.ui.lines&&e.push(`height: ${L.value}`),e.push("padding-left:"+i,"padding-right:"+r),e.join(";")});A(u,(e,n)=>{if(e==n)return;const i=s(e);u.value!=i&&(u.value=i)}),A(()=>t.ui.value,e=>{document.getElementById(g.value)!==document.activeElement&&(u.value=s(e||""))}),A(()=>t.ui,e=>{document.getElementById(g.value)!==document.activeElement&&(u.value=s(e.value||""))});function R(e){if(e.stopPropagation(),t.ui.lines){if(!t.ui.keydownEnter||e.shiftKey)return;e.preventDefault()}re()}function ie(){d()&&S(h)}function ae(){d()&&S(-h)}function N(){if(!f.value)return;const e=getComputedStyle(f.value),n=window.parseFloat(x(e.getPropertyValue("border-top-width"))),i=window.parseFloat(x(e.getPropertyValue("border-bottom-width")));f.value.style.height="auto";const r=f.value.scrollHeight+n+i;f.value.style.height=`${r}px`,L.value=`${r}px`}function re(){if(!t.ui.keydownEnter)return;const e=F(u.value);I.sendEvent(new C(t.ui.inputValue,t.ui.keydownEnter,T(),e)),clearTimeout(K)}function ue(e){N(),m(e)}function m(e,n=0){le();const i=F(u.value);if(i!=t.ui.value){if(T(),e||t.ui.disableDebounce){I.sendEvent(new C(t.ui.inputValue,n,T(),i));return}fe()}}function le(){if(!d()||!t.ui.min&&!t.ui.max)return;let e=z();e=Math.max(t.ui.min||0,e),t.ui.max&&(e=Math.min(t.ui.max,e)),u.value=s(`${e}`)}function oe(e){if(!d())return;const n=e.deltaY<0,i=e.deltaY>0;!n&&!i||S(n?h:-h)}function S(e){if(!d())return;let n=z();n+=e,n=Math.max(t.ui.min||0,n),t.ui.max&&(n=Math.min(t.ui.max,n)),u.value=s(`${n}`),m(!1)}function z(){return t.ui.keyboardOptions?.keyboardType===o.KeyboardInteger?window.parseInt(U(u.value)):t.ui.keyboardOptions?.keyboardType===o.KeyboardFloat?window.parseFloat(x(u.value)):0}function d(){return t.ui.keyboardOptions?.keyboardType==o.KeyboardInteger||t.ui.keyboardOptions?.keyboardType==o.KeyboardFloat}function se(){return navigator.language.split("-")[0].toLowerCase()==="de"}function de(){if(!d())return;const e=document.getElementById(g.value);e&&e.select()}function ce(){u.value=s(u.value),m(!0)}function G(){u.value=d()?"0":"",m(!0)}function pe(e){return e/1e6}function fe(){let e=500;t.ui.debounceTime&&t.ui.debounceTime>0&&(e=pe(t.ui.debounceTime)),clearTimeout(K),K=window.setTimeout(()=>{const n=F(u.value);n!=t.ui.value&&I.sendEvent(new C(t.ui.inputValue,0,T(),n))},e)}return ge(N),(e,n)=>e.ui.invisible?v("",!0):(p(),c("div",{key:0,style:O(X.value)},[V(he,{"wrapper-style":_(be)(t.ui.style),label:t.ui.label,error:t.ui.errorText,help:t.ui.supportingText,disabled:t.ui.disabled},{default:ve(()=>[Q("div",Te,[t.ui.leading?(p(),c("div",{key:0,ref_key:"leadingElement",ref:M,class:"absolute inset-y-0 left-0 pl-2 pr-1 flex items-center pointer-events-none"},[V(Y,{ui:t.ui.leading},null,8,["ui"])],512)):v("",!0),t.ui.lines?v("",!0):q((p(),c("input",{key:1,id:g.value,"onUpdate:modelValue":n[0]||(n[0]=i=>u.value=i),class:"input-field",style:O(P.value),disabled:t.ui.disabled,type:"text",inputmode:ee.value,onKeydown:[b(R,["enter"]),b(Z(ie,["prevent"]),["up"]),b(Z(ae,["prevent"]),["down"])],onFocus:de,onFocusout:ce,onInput:n[1]||(n[1]=i=>m(!1)),onWheel:oe},null,44,Ie)),[[J,u.value]]),t.ui.lines?q((p(),c("textarea",{key:2,id:g.value,ref_key:"textarea",ref:f,"onUpdate:modelValue":n[2]||(n[2]=i=>u.value=i),class:"input-field",style:O(P.value),disabled:t.ui.disabled,type:"text",rows:t.ui.lines,onKeydown:b(R,["enter"]),onFocusout:n[3]||(n[3]=i=>m(!0)),onInput:n[4]||(n[4]=i=>ue(!1))},null,44,Ee)),[[J,u.value]]):v("",!0),t.ui.trailing?(p(),c("div",{key:3,ref_key:"trailingElement",ref:W,class:"absolute inset-y-0 right-0 pr-2 pl-1 flex items-center pointer-events-none"},[V(Y,{ui:t.ui.trailing},null,8,["ui"])],512)):u.value&&!t.ui.disabled&&!t.ui.lines&&t.ui.style!=_(H).TextFieldBasic?(p(),c("div",{key:4,ref_key:"clearButton",ref:j,class:"absolute inset-y-0 right-0 pr-2 pl-1 flex items-center"},[V(_(Ve),{class:"w-4",tabindex:"-1",onClick:G,onKeydown:b(G,["enter"])})],512)):v("",!0)])]),_:1},8,["wrapper-style","label","error","help","disabled"])],4))}});export{Ae as default};
