import{c as d,o as c,b as R,d as Y,u as Z,G as V,r as C,g as y,K as s,w as E,a as v,s as g,t as ee,v as D,j as A,e as L,h as I,H as W,q as U,U as K,f as b}from"./main-D4Qo4PdH.js";import{i as te,_ as ne}from"./InputWrapper.vue_vue_type_style_index_0_lang-D4fbIbWN.js";import{f as ae}from"./frame-BFmZ95SY.js";import"./closeBold-B47vSi87.js";import"./length-CE-uc3jn.js";const ie={xmlns:"http://www.w3.org/2000/svg","xml:space":"preserve",viewBox:"0 0 24 24"};function le(T,t){return c(),d("svg",ie,t[0]||(t[0]=[R("path",{fill:"currentColor",d:"M23.25 23.999a.743.743 0 0 1-.53-.22L12 13.06 1.28 23.779a.744.744 0 0 1-1.06 0 .752.752 0 0 1 0-1.061l10.72-10.72L.22 1.279C.078 1.138 0 .949 0 .749S.078.36.22.219c.141-.142.33-.22.53-.22s.389.078.53.22L12 10.938 22.72.218a.744.744 0 0 1 1.06 0 .747.747 0 0 1 0 1.061l-10.72 10.72 10.72 10.72a.752.752 0 0 1 0 1.061.746.746 0 0 1-.53.219"},null,-1)]))}const re={render:le},ue={class:"relative"},oe=["id","disabled","inputmode"],se=["id","disabled","rows"],me=Y({__name:"UiTextField",props:{ui:{}},setup(T){const t=T,x=Z(),F=V("leadingElement"),S=V("trailingElement"),_=V("clearButton"),f=C(!1),l=C(t.ui.value?w(t.ui.value):"");let k=0;const j=y(()=>ae(t.ui.frame).join(";")),m=y(()=>t.ui.id?t.ui.id:"tf-"+t.ui.inputValue),M=y(()=>{switch(t.ui.keyboardOptions?.keyboardType){case s.KeyboardInteger:return"numeric";case s.KeyboardFloat:return"decimal";case s.KeyboardEMail:return"email";case s.KeyboardPhone:return"tel";case s.KeyboardURL:return"url";case s.KeyboardSearch:return"search"}return"text"});function N(e){if(e==="")return"0";const n=e.lastIndexOf("-")>=0,a=e.split(/[,.]/);for(let i=0;i<a.length;i++)a[i]=a[i].replaceAll(/\D/g,""),a[i]=a[i].replaceAll(/^0+/g,"");const o=a.length>1?a.pop():void 0,r=a.join("");let u=r===""?"0":r;return u+=o===void 0||o===""?"":"."+o,u=n?"-"+u:u,u}function P(e,n=!1){const a=e.indexOf("-")>=0&&e.indexOf("-")===e.lastIndexOf("-"),o=H()?",":".",r=e.split(/[,.]/),u=r.length>1?r.pop()?.replaceAll(/\D/g,""):void 0;let i=r.join("").replaceAll(/\D/g,"");return i=/^0+$/g.test(i)?"0":i.replaceAll(/^0+/g,""),u===""&&n?i+=o:u&&u.length>0&&(i+=o+u),i===""?i=n?"":"0":i=a?"-"+i:i,i}function G(e){const n=e.lastIndexOf("-")>=0;let a=e.replace(/\D/g,"");return a===""?a="0":a=n?"-"+a:a,a}function q(e,n=!1){const a=e.lastIndexOf("-")>=0,o=e.split("");let r="";for(let u=0;u<o.length;u++){const i=o[u];/\D/g.test(i)||(r!==""||i!=="0")&&(r+=i)}return r===""?r=n?"":"0":r=a?"-"+r:r,r}function h(e){switch(t.ui.keyboardOptions?.keyboardType){case s.KeyboardInteger:return G(e);case s.KeyboardFloat:return N(e);default:return e}}function w(e){let n;switch(t.ui.keyboardOptions?.keyboardType){case s.KeyboardInteger:n=q(e,!f.value);break;case s.KeyboardFloat:n=P(e,!f.value);break;default:n=e}return f.value=!1,n}const O=y(()=>{const e=F.value?.offsetWidth,n=e?`${e}px`:"auto";let a;const o=S.value?.offsetWidth;if(o!==void 0)a=`${o}px`;else{const r=_.value?.offsetWidth;a=r?`${r}px`:"auto"}return{"padding-left":n,"padding-right":a}});E(l,(e,n)=>{if(e==n)return;const a=w(e);l.value!=a&&(l.value=a)}),E(()=>t.ui.value,e=>{document.getElementById(m.value)!==document.activeElement&&(f.value=!0,l.value=e||"")}),E(()=>t.ui,e=>{document.getElementById(m.value)!==document.activeElement&&(f.value=!0,l.value=e.value?e.value:"")});function z(e){if(t.ui.keydownEnter){e.stopPropagation();const n=h(l.value);if(n==t.ui.value)return;x.sendEvent(new K(t.ui.inputValue,t.ui.keydownEnter,b(),n)),clearTimeout(k)}}function p(e,n=0){const a=h(l.value);if(a!=t.ui.value){if(b(),e||t.ui.disableDebounce){x.sendEvent(new K(t.ui.inputValue,n,b(),a));return}X()}}function B(){return t.ui.keyboardOptions?.keyboardType==s.KeyboardInteger||t.ui.keyboardOptions?.keyboardType==s.KeyboardFloat}function H(){return navigator.language.split("-")[0].toLowerCase()==="de"}function J(){l.value===""&&B()?l.value="0":(f.value=!0,l.value=w(l.value)),p(!0)}function $(){l.value=B()?"0":"",p(!0)}function Q(e){return e/1e6}function X(){let e=500;t.ui.debounceTime&&t.ui.debounceTime>0&&(e=Q(t.ui.debounceTime)),clearTimeout(k),k=window.setTimeout(()=>{const n=h(l.value);n!=t.ui.value&&x.sendEvent(new K(t.ui.inputValue,0,b(),n))},e)}return(e,n)=>e.ui.invisible?v("",!0):(c(),d("div",{key:0,style:I(j.value)},[g(ne,{"wrapper-style":U(te)(t.ui.style),label:t.ui.label,error:t.ui.errorText,help:t.ui.supportingText,disabled:t.ui.disabled},{default:ee(()=>[R("div",ue,[t.ui.leading?(c(),d("div",{key:0,ref_key:"leadingElement",ref:F,class:"absolute inset-y-0 left-0 pl-2 pr-1 flex items-center pointer-events-none"},[g(A,{ui:t.ui.leading},null,8,["ui"])],512)):v("",!0),t.ui.lines?v("",!0):D((c(),d("input",{key:1,id:m.value,"onUpdate:modelValue":n[0]||(n[0]=a=>l.value=a),class:"input-field",style:I(O.value),disabled:t.ui.disabled,type:"text",inputmode:M.value,onKeydown:L(z,["enter"]),onFocusout:J,onInput:n[1]||(n[1]=a=>p(!1))},null,44,oe)),[[W,l.value]]),t.ui.lines?D((c(),d("textarea",{key:2,id:m.value,"onUpdate:modelValue":n[2]||(n[2]=a=>l.value=a),class:"input-field",style:I(O.value),disabled:t.ui.disabled,type:"text",rows:t.ui.lines,onFocusout:n[3]||(n[3]=a=>p(!0)),onInput:n[4]||(n[4]=a=>p(!1))},null,44,se)),[[W,l.value]]):v("",!0),t.ui.trailing?(c(),d("div",{key:3,ref_key:"trailingElement",ref:S,class:"absolute inset-y-0 right-0 pr-2 pl-1 flex items-center pointer-events-none"},[g(A,{ui:t.ui.trailing},null,8,["ui"])],512)):l.value&&!t.ui.disabled&&!t.ui.lines?(c(),d("div",{key:4,ref_key:"clearButton",ref:_,class:"absolute inset-y-0 right-0 pr-2 pl-1 flex items-center"},[g(U(re),{class:"w-4",tabindex:"-1",onClick:$,onKeydown:L($,["enter"])})],512)):v("",!0)])]),_:1},8,["wrapper-style","label","error","help","disabled"])],4))}});export{me as default};
