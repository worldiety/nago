import{d as D,u as T,r as S,m as p,M as y,p as _,g as q,q as x,c as K,i as c,o as a,s as V,t as v,v as $,x as R,b as h,y as n,h as A,j as w,z as L,T as N,B as b,a as O,e as k,l as U,f as j}from"./main-BRwUW74M.js";import{c as u}from"./length-AdkHSc9u.js";let s=0;function z(){s===0&&(document.body.style.overflow="hidden"),s++}function I(){s=Math.max(0,s-1),s===0&&(document.body.style.overflow="visible")}const G={key:0},H=["onKeydown"],Q=D({__name:"UiModal",props:{ui:{}},setup(g){const o=g,C=T(),d=S();let i,l;p(()=>{o.ui.allowBackgroundScrolling||z(),o.ui.modalType!==y.ModalTypeOverlay&&M()}),_(()=>{o.ui.allowBackgroundScrolling||I()});const E=q(()=>{const e=[];return o.ui.right&&e.push(`right: ${u(o.ui.right)}`),o.ui.top&&e.push(`top: ${u(o.ui.top)}`),o.ui.left&&e.push(`left: ${u(o.ui.left)}`),o.ui.bottom&&e.push(`bottom: ${u(o.ui.bottom)}`),e.join(";")});function r(){o.ui.onDismissRequest&&C.sendEvent(new U(o.ui.onDismissRequest,j()))}function M(){const e=d.value?.querySelectorAll('[tabindex="0"], button:not([tabindex="-1"])')??[],t=e[0],m=e[e.length-1];t&&(i=t,i.focus()),m&&(l=m)}function B(e){if(!e.shiftKey&&document.activeElement===l){e.preventDefault(),i?.focus();return}}function F(e){if(document.activeElement===i){e.preventDefault(),l?.focus();return}}function f(e){e.code==="Escape"&&r()}return p(()=>{addEventListener("keydown",f)}),x(()=>{removeEventListener("keydown",f)}),(e,t)=>e.ui.content?e.ui.modalType==V(y).ModalTypeOverlay?(a(),c(b,{key:1,to:"#ora-overlay"},[v(N,null,{default:$(()=>[R(h("div",{class:"pointer-events-auto fixed",style:A(E.value),onClick:n(r,["stop"])},[v(w,{ui:e.ui.content,class:""},null,8,["ui"])],4),[[L,e.ui.content]])]),_:1})])):(a(),c(b,{key:2,to:"#ora-modals"},[h("div",{ref_key:"dialogContainer",ref:d,class:"pointer-events-auto fixed",onKeydown:[k(n(B,["exact"]),["tab"]),k(n(F,["shift"]),["tab"])],onClick:n(r,["stop"])},[e.ui.content?(a(),c(w,{key:0,ui:e.ui.content,class:"h-screen w-screen",onClick:t[0]||(t[0]=n(()=>{},["stop"]))},null,8,["ui"])):O("",!0)],40,H)])):(a(),K("div",G))}});export{Q as default};
