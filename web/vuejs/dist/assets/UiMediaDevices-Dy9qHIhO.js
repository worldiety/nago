import{d as w,u as D,r as o,m as M,c as h,o as g,U as r,f as c,M as I,p as t}from"./index-C5jlrZ0g.js";const A=w({__name:"UiMediaDevices",props:{ui:{}},setup(d){const i=d,n=D(),s=o([]),a=o(!1);async function p(){try{await navigator.mediaDevices.getUserMedia({audio:i.ui.withAudio??!1,video:i.ui.withVideo??!1}),a.value=!0}catch(e){a.value=!1,console.warn("Couldn't get requested permissions",e)}n.sendEvent(new r(i.ui.hasGrantedPermissions,0,c(),String(a.value)))}async function l(){const e=await navigator.mediaDevices.enumerateDevices();s.value=e.filter(f).map(m);const u=JSON.stringify(s.value);n.sendEvent(new r(i.ui.inputValue,0,c(),u))}function v(e){switch(e.kind){case"audioinput":return t.AudioInput;case"audiooutput":return t.AudioOutput;case"videoinput":return t.VideoInput}}function f(e){if(!e.label||!e.deviceId||!e.groupId)return!1;switch(e.kind){case"audioinput":case"audiooutput":return i.ui.withAudio??!1;case"videoinput":return i.ui.withVideo??!1}}function m(e){return new I(e.deviceId,e.groupId,e.label,v(e))}return M(async()=>{await p(),a.value&&await l()}),(e,u)=>(g(),h("div"))}});export{A as default};
