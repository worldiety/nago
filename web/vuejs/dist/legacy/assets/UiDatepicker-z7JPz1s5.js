import{c as D,o as m,b as r,d as ne,u as de,G as ae,r as E,w as L,g as Y,i as pe,t as he,a as H,F as _,z as P,k as U,E as N,e as z,s as R,q as I,J as ce,f as X,U as se,L as ye,N as ge,n as re,v as ue,P as me,H as De,D as be,_ as Se,m as Me,Q as oe,R as K,h as Ee}from"./main-gXEIn_vJ.js";import{_ as we}from"./InputWrapper.vue_vue_type_style_index_0_lang-B5HnyYhC.js";import{i as ke}from"./index-MMdvg7RG.js";import{C as xe}from"./closeBold-D4pm6VZh.js";import{f as Ce}from"./frame-BbkKW3a9.js";import"./index-Vcq4gwWv.js";import"./length-BB7nP2nm.js";const Ie={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"};function Te(k,e){return m(),D("svg",Ie,e[0]||(e[0]=[r("path",{fill:"currentColor",d:"M7.5 10.5h-1a1 1 0 1 0 0 2h1a1 1 0 0 0 0-2M12.5 10.5h-1a1 1 0 0 0 0 2h1a1 1 0 0 0 0-2M17.5 10.5h-1a1 1 0 0 0 0 2h1a1 1 0 0 0 0-2M7.5 14.5h-1a1 1 0 1 0 0 2h1a1 1 0 0 0 0-2M12.5 14.5h-1a1 1 0 1 0 0 2h1a1 1 0 0 0 0-2M17.5 14.5h-1a1 1 0 1 0 0 2h1a1 1 0 0 0 0-2M7.5 18.5h-1a1 1 0 0 0 0 2h1a1 1 0 0 0 0-2M12.5 18.5h-1a1 1 0 0 0 0 2h1a1 1 0 1 0 0-2M17.5 18.5h-1a1 1 0 0 0 0 2h1a1 1 0 0 0 0-2"},null,-1),r("path",{fill:"currentColor",d:"M21.5 3h-2.75a.25.25 0 0 1-.25-.25V1a1 1 0 0 0-2 0v4.75a.75.75 0 1 1-1.5 0V3.5a.5.5 0 0 0-.5-.5H8.25A.25.25 0 0 1 8 2.751V1a1 1 0 1 0-2 0v4.75a.75.75 0 1 1-1.5 0V3.5A.5.5 0 0 0 4 3H2.5a2 2 0 0 0-2 2v17a2 2 0 0 0 2 2h19a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2m0 18.5a.5.5 0 0 1-.5.5H3a.5.5 0 0 1-.5-.5v-12A.5.5 0 0 1 3 9h18a.5.5 0 0 1 .5.5Z"},null,-1)]))}const Oe={render:Te},$e={class:"input-field relative z-0 !pr-10"},Ye=["value","aria-label"],Ve=["value"],Be=["value","aria-label"],Le=["value"],_e=["value","aria-label"],Ne=["value"],Fe=["value"],Ae=["value"],Pe=["value"],ze=["value"],Re={key:0,class:"text-placeholder-text"},Je={class:"absolute top-0 bottom-0 right-4 flex items-center h-full"},je=["aria-label"],He=ne({__name:"DatepickerInput",props:{value:{},label:{},errorText:{},supportingText:{},disabled:{type:Boolean},datepickerStyle:{},datepickerExpanded:{type:Boolean},selectedStartYear:{},selectedStartMonth:{},selectedStartDay:{},selectedEndYear:{},selectedEndMonth:{},selectedEndDay:{},rangeMode:{type:Boolean},inputValue:{},endInputValue:{}},emits:["showDatepicker"],setup(k){const e=k,u=de(),S=ae("datepickerInputContainer"),d=E(e.selectedStartYear),v=E(b(e.selectedStartMonth)),h=E(b(e.selectedStartDay)),M=E(e.selectedEndYear),y=E(b(e.selectedEndMonth)),o=E(b(e.selectedEndDay));L(()=>e.selectedStartYear,a=>{d.value=a}),L(()=>e.selectedEndYear,a=>{M.value=a}),L(()=>e.selectedStartMonth,a=>{v.value=b(a)}),L(()=>e.selectedEndMonth,a=>{y.value=b(a)}),L(()=>e.selectedStartDay,a=>{h.value=b(a)}),L(()=>e.selectedEndDay,a=>{o.value=b(a)});const f=Y(()=>new Date(d.value,parseInt(v.value,10),0,0,0,0,0).getDate()),C=Y(()=>new Date(M.value,parseInt(y.value,10),0,0,0,0,0).getDate()),O=Y(()=>!e.value||!e.value.year||(new Date().setFullYear(e.selectedStartYear,e.selectedStartMonth-1,e.selectedStartDay),!e.selectedStartYear||!e.selectedStartMonth||!e.selectedStartDay)?!1:e.rangeMode?!!(e.selectedEndYear&&e.selectedEndMonth&&e.selectedEndDay):!0),J=Y(()=>e.rangeMode?"Zeitraumauswahldialog öffnen, ".concat(F.value):"Datumsauswahldialog öffnen, ".concat(F.value)),F=Y(()=>{const a=new Date(d.value,parseInt(v.value,10)-1,parseInt(h.value,10),0,0,0,0);if(!e.rangeMode)return"Ausgewähltes Datum: ".concat(a.toLocaleDateString());const s=new Date(M.value,parseInt(y.value,10)-1,parseInt(o.value,10),0,0,0,0);return"Ausgewählter Zeitraum: ".concat(a.toLocaleDateString()," bis ").concat(s.toLocaleDateString())});function b(a){return ke(a)&&(a=a.toString(10)),a.length===1?"0".concat(a):a}function j(a){a.target&&(h.value=a.target.value)}function A(a){a.target&&(o.value=a.target.value)}function Z(a){a.target&&(v.value=a.target.value,V())}function c(a){a.target&&(y.value=a.target.value,W())}function $(a){if(!a.target)return;const s=a.target.value;if(!/^[0-9]+$/.test(s))return;const i=parseInt(s,10);if(i<=1582){d.value=0,d.value=e.selectedStartYear;return}d.value=i,V(),B(a)}function q(a){if(!a.target)return;const s=a.target.value;if(!/^[0-9]+$/.test(s))return;const i=parseInt(s,10);if(i<=1582){M.value=0,M.value=e.selectedEndYear;return}M.value=i,W(),B(a)}function V(){parseInt(h.value,10)>f.value&&(h.value=b(f.value))}function W(){parseInt(o.value,10)>C.value&&(o.value=b(C.value))}function G(){if(!e.rangeMode)return!1;const a=new Date(d.value,parseInt(v.value,10),parseInt(h.value,10),0,0,0,0);return new Date(M.value,parseInt(y.value,10),parseInt(o.value,10),0,0,0,0)<a}function Q(){const a=h.value,s=v.value,i=d.value;h.value=o.value,v.value=y.value,d.value=M.value,o.value=a,y.value=s,M.value=i}function B(a){var i;if(!a.relatedTarget)return;const s=a.relatedTarget;(i=S.value)!=null&&i.contains(s)||ee()}function ee(){G()&&Q();const a=parseInt(h.value,10),s=parseInt(v.value,10),i=parseInt(o.value,10),le=parseInt(y.value,10);e.rangeMode?u.sendEvent(new ce(e.inputValue,JSON.stringify({d:a,m:s,y:d.value}),e.endInputValue,JSON.stringify({d:i,m:le,y:M.value}),0,X())):u.sendEvent(new se(e.inputValue,0,X(),JSON.stringify({d:a,m:s,y:d.value})))}return(a,s)=>(m(),pe(we,{label:a.label,error:a.errorText,help:a.supportingText,disabled:a.disabled,"no-hover-effect":!0},{default:he(()=>[r("div",$e,[r("div",{ref_key:"datepickerInputContainer",ref:S},[O.value?(m(),D(_,{key:0},[r("select",{value:h.value,onInput:j,onBlur:B,class:"cursor-pointer bg-transparent","aria-label":a.rangeMode?"Startdatum Tag auswählen":"Datum Tag auswählen",onClick:s[0]||(s[0]=P(()=>{},["stop"]))},[(m(!0),D(_,null,U(f.value,i=>(m(),D("option",{value:b(i),key:i},N(b(i)),9,Ve))),128))],40,Ye),s[8]||(s[8]=r("span",{"aria-hidden":"true"},".",-1)),r("select",{value:v.value,onInput:Z,onBlur:B,class:"cursor-pointer bg-transparent","aria-label":a.rangeMode?"Startdatum Monat auswählen":"Datum Monat auswählen",onClick:s[1]||(s[1]=P(()=>{},["stop"]))},[(m(),D(_,null,U(12,i=>r("option",{value:b(i),key:i},N(b(i)),9,Le)),64))],40,Be),s[9]||(s[9]=r("span",{"aria-hidden":"true"},".",-1)),r("input",{value:d.value,type:"text",inputmode:"numeric",class:"bg-transparent w-12","aria-label":a.rangeMode?"Startdatum Jahr eingeben":"Datum Jahr eingeben",onBlur:$,onClick:s[2]||(s[2]=P(()=>{},["stop"]))},null,40,_e)],64)):H("",!0),O.value&&a.rangeMode?(m(),D(_,{key:1},[s[10]||(s[10]=r("span",{class:"mr-2"},"-",-1)),r("select",{value:o.value,onInput:A,onBlur:B,class:"cursor-pointer bg-transparent","aria-label":"Enddatum Tag auswählen",onClick:s[3]||(s[3]=P(()=>{},["stop"]))},[(m(!0),D(_,null,U(C.value,i=>(m(),D("option",{value:b(i),key:i},N(b(i)),9,Fe))),128))],40,Ne),s[11]||(s[11]=r("span",{"aria-hidden":"true"},".",-1)),r("select",{value:y.value,onInput:c,onBlur:B,class:"cursor-pointer bg-transparent","aria-label":"Enddatum Monat auswählen",onClick:s[4]||(s[4]=P(()=>{},["stop"]))},[(m(),D(_,null,U(12,i=>r("option",{value:b(i),key:i},N(b(i)),9,Pe)),64))],40,Ae),s[12]||(s[12]=r("span",{"aria-hidden":"true"},".",-1)),r("input",{value:M.value,type:"text",inputmode:"numeric",class:"bg-transparent w-12","aria-label":"Enddatum Jahr eingeben",onBlur:q,onClick:s[5]||(s[5]=P(()=>{},["stop"]))},null,40,ze)],64)):H("",!0)],512),O.value?H("",!0):(m(),D("p",Re,N(a.$t("datepicker.select")),1)),r("div",Je,[r("div",{class:"cursor-pointer hover:text-I0",tabindex:"0",onClick:s[6]||(s[6]=i=>a.$emit("showDatepicker")),onKeydown:s[7]||(s[7]=z(i=>a.$emit("showDatepicker"),["enter"])),role:"button","aria-label":J.value},[R(I(Oe),{class:"w-4","aria-hidden":"true"})],40,je)])])]),_:1},8,["label","error","help","disabled"]))}}),We={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"};function Ke(k,e){return m(),D("svg",We,e[0]||(e[0]=[r("path",{fill:"currentColor",d:"M19.5 12a2.3 2.3 0 0 1-.78 1.729L7.568 23.54a1.847 1.847 0 0 1-2.439-2.773l9.752-8.579a.25.25 0 0 0 0-.376L5.129 3.233A1.847 1.847 0 0 1 7.568.46l11.148 9.808A2.31 2.31 0 0 1 19.5 12"},null,-1)]))}const ie={render:Ke},Ue={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"};function Ze(k,e){return m(),D("svg",Ue,e[0]||(e[0]=[r("path",{fill:"currentColor",d:"M16.147 1.952h-3.909a1.5 1.5 0 0 0 0 3h3.909a4.852 4.852 0 1 1 0 9.7h-9.01a.25.25 0 0 1-.25-.25V11.27a1 1 0 0 0-1.707-.707L.293 15.449a1 1 0 0 0 0 1.414L5.18 21.75a1 1 0 0 0 1.707-.707v-3.137a.25.25 0 0 1 .25-.25h9.01a7.852 7.852 0 1 0 0-15.7Z"},null,-1)]))}const qe={render:Ze},Ge={class:"flex justify-between items-center gap-x-2"},Qe={class:"truncate"},Xe=ne({__name:"DatepickerHeader",props:{label:{}},emits:["close"],setup(k,{expose:e}){const u=ae("closeButton");return e({closeButton:u}),(S,d)=>{var v;return m(),D("div",null,[r("div",Ge,[r("p",Qe,N((v=S.label)!=null?v:""),1),r("div",{ref_key:"closeButton",ref:u,class:"flex justify-center items-center cursor-pointer rounded-full size-8 shrink-0 grow-0",tabindex:"0","aria-label":"Dialog schließen",onClick:d[0]||(d[0]=h=>S.$emit("close")),onKeydown:d[1]||(d[1]=z(h=>S.$emit("close"),["enter"]))},[R(I(xe),{class:"h-4","aria-hidden":"true"})],544)]),d[2]||(d[2]=r("div",{class:"border-b border-b-primary mt-2"},null,-1))])}}});var x=(k=>(k[k.SELECT_START=0]="SELECT_START",k[k.SELECT_END=1]="SELECT_END",k[k.COMPLETE=2]="COMPLETE",k))(x||{});const T=new Map;T.set(0,"Januar");T.set(1,"Februar");T.set(2,"März");T.set(3,"April");T.set(4,"Mai");T.set(5,"Juni");T.set(6,"Juli");T.set(7,"August");T.set(8,"September");T.set(9,"Oktober");T.set(10,"November");T.set(11,"Dezember");const et=["onKeydown"],tt={class:"relative bg-M1 rounded-xl shadow-lg max-w-96 p-6 z-10"},at={class:"h-[23rem]"},nt={class:"flex justify-between items-center mb-4 h-8"},lt=["tabindex"],rt={class:"flex justify-center items-center basis-2/3 gap-x-px text-lg h-full"},st={class:"basis-1/2 shrink-0 grow-0 h-full"},ut=["value"],ot={class:"basis-1/2 shrink-0 grow-0 h-full"},it={class:"datepicker-grid grid grid-cols-7 gap-y-2 text-center leading-none"},dt=["tabindex","onClick","onKeydown"],ct={class:"select-none"},vt={key:0,class:"mt-2"},ft={key:1,class:"mt-2"},pt=["disabled"],te=1583,ht=ne({__name:"DatepickerOverlay",props:{datepickerExpanded:{type:Boolean},rangeMode:{type:Boolean},label:{},selectedStartDay:{},selectedStartMonth:{},selectedStartYear:{},selectedEndDay:{},selectedEndMonth:{},selectedEndYear:{},rangeSelectionState:{}},emits:["close","select","submitSelection","clearSelection"],setup(k,{emit:e}){const u=k,S=e,{t:d}=ye(),v=ae("datepickerHeader"),h=ae("confirmButton"),M=E(),y=new Date,o=E(y.getFullYear()),f=E(y.getMonth()),C=E(""),O=E(null),J=E(null);L(()=>u.datepickerExpanded,l=>{l&&ge(()=>{var t,n;(n=(t=v.value)==null?void 0:t.closeButton)==null||n.focus(),Z()})}),L(C,l=>{const t=parseInt(l,10);t>1582&&(o.value=t)});const F=Y(()=>!u.selectedStartYear||!u.selectedStartMonth||!u.selectedStartDay?new Date(y.getFullYear(),y.getMonth(),y.getDate(),0,0,0,0):new Date(u.selectedStartYear,u.selectedStartMonth-1,u.selectedStartDay,0,0,0,0)),b=Y(()=>!u.selectedEndYear||!u.selectedEndMonth||!u.selectedEndDay?new Date(y.getFullYear(),y.getMonth(),y.getDate(),0,0,0,0):new Date(u.selectedEndYear,u.selectedEndMonth-1,u.selectedEndDay,0,0,0,0)),j=Y(()=>{var n;const l=[];l.push(...$()),l[0].dayOfWeek!==1&&l.unshift(...q());const t=(n=l.at(-1))==null?void 0:n.dayOfWeek;return t!==void 0&&t!==7&&l.push(...V(t)),l}),A=Y(()=>f.value===0&&o.value===te);function Z(){o.value=F.value.getFullYear(),C.value=o.value.toString(10),f.value=F.value.getMonth()}function c(l,t){(O.value===null||t>O.value)&&(O.value=t,J.value=l)}function $(){const l=[],n=new Date(o.value,f.value+1,0,0,0,0,0).getDate();for(let w=1;w<=n;w++){const g=new Date(o.value,f.value,w,0,0,0,0),p={dayOfWeek:g.getDay()===0?7:g.getDay(),dayOfMonth:w,monthIndex:f.value,year:o.value,selectedStart:!1,selectedEnd:!1,withinRange:!1,selectable:!0};p.selectedStart=W(p.dayOfMonth,p.monthIndex,p.year),u.rangeMode&&(p.selectedEnd=G(p.dayOfMonth,p.monthIndex,p.year),p.withinRange=Q(p.dayOfMonth,p.monthIndex,p.year)),l.push(p)}return l}function q(){const l=[],t=new Date(o.value,f.value,0,0,0,0,0),n=t.getDay()===0?7:t.getDay(),w=t.getDate();for(let g=0;g<n;g++){t.setDate(w-g);const p={dayOfWeek:t.getDay()===0?7:t.getDay(),dayOfMonth:w-g,monthIndex:t.getMonth(),year:t.getFullYear(),selectedStart:!1,selectedEnd:!1,withinRange:!1,selectable:!A.value};p.selectedStart=W(p.dayOfMonth,p.monthIndex,p.year),u.rangeMode&&(p.selectedEnd=G(p.dayOfMonth,p.monthIndex,p.year),p.withinRange=Q(p.dayOfMonth,p.monthIndex,p.year)),l.unshift(p)}return l}function V(l){const t=[];let n;f.value+1===12?n=new Date(o.value+1,0,1,0,0,0,0):n=new Date(o.value,f.value+1,1,0,0,0,0);for(let w=1;w<=7-l;w++){n.setDate(w);const g={dayOfWeek:n.getDay()===0?7:n.getDay(),dayOfMonth:n.getDate(),monthIndex:n.getMonth(),year:n.getFullYear(),selectedStart:!1,selectedEnd:!1,withinRange:!1,selectable:!0};g.selectedStart=W(g.dayOfMonth,g.monthIndex,g.year),u.rangeMode&&(g.selectedEnd=G(g.dayOfMonth,g.monthIndex,g.year),g.withinRange=Q(g.dayOfMonth,g.monthIndex,g.year)),t.push(g)}return t}function W(l,t,n){return l===u.selectedStartDay&&t===u.selectedStartMonth-1&&n===u.selectedStartYear}function G(l,t,n){return u.rangeSelectionState!==x.SELECT_END&&l===u.selectedEndDay&&t===u.selectedEndMonth-1&&n===u.selectedEndYear}function Q(l,t,n){if(u.rangeSelectionState===x.SELECT_END||!u.selectedStartYear||!u.selectedStartMonth||!u.selectedStartDay)return!1;const w=new Date(n,t,l,0,0,0,0);return F.value<=w&&w<=b.value}function B(){if(!A.value){if(f.value===0){f.value=11,o.value-=1,C.value=o.value.toString(10);return}f.value-=1}}function ee(){if(f.value===11){f.value=0,o.value+=1,C.value=o.value.toString(10);return}f.value+=1}function a(l){l.selectable&&(S("select",l.dayOfMonth,l.monthIndex,l.year),u.rangeMode||S("close"))}function s(l){var t,n;document.activeElement===i()&&(l.preventDefault(),(n=(t=v.value)==null?void 0:t.closeButton)==null||n.focus())}function i(){return u.rangeSelectionState===x.COMPLETE?h.value:J.value instanceof HTMLElement?J.value:null}function le(l){var t,n;document.activeElement===((t=v.value)==null?void 0:t.closeButton)&&(l.preventDefault(),(n=i())==null||n.focus())}function ve(){var l,t;S("clearSelection"),(t=(l=v.value)==null?void 0:l.closeButton)==null||t.focus()}function fe(){const l=parseInt(C.value,10);l<te?(C.value=te.toString(10),o.value=te):o.value=l}return(l,t)=>l.datepickerExpanded?(m(),D("div",{key:0,ref_key:"datepicker",ref:M,class:"fixed top-0 left-0 bottom-0 right-0 flex justify-center items-center z-30",onKeydown:[z(P(s,["exact"]),["tab"]),z(P(le,["shift"]),["tab"]),t[5]||(t[5]=z(n=>l.$emit("close"),["esc"]))]},[r("div",tt,[r("div",at,[R(Xe,{ref_key:"datepickerHeader",ref:v,label:l.label,onClose:t[0]||(t[0]=n=>S("close")),class:"mb-4"},null,8,["label"]),r("div",nt,[r("div",{class:re(["flex justify-center items-center rounded-full size-8",A.value?"opacity-50":"hover:bg-I0/15 cursor-pointer"]),tabindex:A.value?"-1":"0",onClick:B,onKeydown:z(B,["enter"])},[R(I(ie),{class:"rotate-180 h-4"})],42,lt),r("div",rt,[r("div",st,[ue(r("select",{"onUpdate:modelValue":t[1]||(t[1]=n=>f.value=n),class:"hover:bg-I0/15 border-0 bg-M1 text-right cursor-pointer rounded-l-md select-none w-full h-full px-2"},[(m(!0),D(_,null,U(I(T).entries(),(n,w)=>(m(),D("option",{key:w,value:n[0]},N(n[1]),9,ut))),128))],512),[[me,f.value]])]),r("div",ot,[ue(r("input",{"onUpdate:modelValue":t[2]||(t[2]=n=>C.value=n),type:"text",class:"hover:bg-I0/15 border-0 bg-M1 rounded-r-md text-left w-full h-full px-2",onBlur:fe},null,544),[[De,C.value]])])]),r("div",{class:"hover:bg-I0/15 flex justify-center items-center cursor-pointer rounded-full size-8",tabindex:"0",onClick:ee,onKeydown:z(ee,["enter"])},[R(I(ie),{class:"h-4"})],32)]),r("div",it,[t[6]||(t[6]=r("span",null,"Mo",-1)),t[7]||(t[7]=r("span",null,"Di",-1)),t[8]||(t[8]=r("span",null,"Mi",-1)),t[9]||(t[9]=r("span",null,"Do",-1)),t[10]||(t[10]=r("span",null,"Fr",-1)),t[11]||(t[11]=r("span",null,"Sa",-1)),t[12]||(t[12]=r("span",null,"So",-1)),(m(!0),D(_,null,U(j.value,(n,w)=>(m(),D("div",{key:w,class:re(["relative flex justify-center items-center h-full w-full",{"within-range-day":n.withinRange,"selected-start-day-container":n.selectedStart,"selected-end-day-container":n.selectedEnd}])},[r("div",{ref_for:!0,ref:g=>c(g,w),class:re(["day flex justify-center items-center",{"hover:bg-I0/15 cursor-pointer":n.selectable,"unselectable-day":!n.selectable,"selected-day":n.selectedStart||n.selectedEnd,"text-disabled-text":!n.withinRange&&n.monthIndex!==f.value}]),tabindex:n.selectable?"0":"-1",onClick:g=>a(n),onKeydown:z(g=>a(n),["enter"])},[r("span",ct,N(n.dayOfMonth),1)],42,dt)],2))),128))])]),l.rangeMode?(m(),D(_,{key:0},[l.rangeSelectionState===I(x).SELECT_START?(m(),D("p",vt," Bitte wählen Sie einen Startzeitpunkt aus ")):l.rangeSelectionState===I(x).SELECT_END?(m(),D("p",ft," Bitte wählen Sie einen Endzeitpunkt aus ")):l.rangeSelectionState===I(x).COMPLETE?(m(),D("button",{key:2,onClick:ve,class:"flex justify-start items-center gap-x-2 text-I0 underline mt-2"},[R(I(qe),{class:"h-4","aria-hidden":"true"}),t[13]||(t[13]=be(" Auswahl zurücksetzen "))])):H("",!0),t[14]||(t[14]=r("div",{class:"border-b border-b-disabled-background mt-3 mb-6"},null,-1)),r("button",{ref_key:"confirmButton",ref:h,class:"button-confirm button-primary",disabled:l.rangeSelectionState!==I(x).COMPLETE,onClick:t[3]||(t[3]=n=>S("submitSelection"))},N(I(d)("datepicker.confirm")),9,pt)],64)):H("",!0)]),r("div",{class:"absolute top-0 left-0 bottom-0 right-0 bg-opacity-60 bg-black z-0",onClick:t[4]||(t[4]=n=>S("close"))})],40,et)):H("",!0)}}),yt=Se(ht,[["__scopeId","data-v-a11b6023"]]),wt=ne({__name:"UiDatepicker",props:{ui:{}},setup(k){const e=k,u=de(),S=E(!1),d=E(0),v=E(0),h=E(0),M=E(0),y=E(0),o=E(0),f=E(x.SELECT_START);Me(O);const C=Y(()=>Ce(e.ui.frame).join(";"));L(()=>e.ui,O);function O(){e.ui.value===void 0&&(e.ui.value=new oe),d.value=e.ui.value.day?e.ui.value.day:0,v.value=e.ui.value.month?e.ui.value.month:0,h.value=e.ui.value.year?e.ui.value.year:0,e.ui.endValue===void 0&&(e.ui.endValue=new oe),M.value=e.ui.endValue.day?e.ui.endValue.day:0,y.value=e.ui.endValue.month?e.ui.endValue.month:0,o.value=e.ui.endValue.year?e.ui.endValue.year:0,f.value=x.SELECT_START}function J(){!e.ui.disabled&&!S.value&&(f.value=x.SELECT_START,S.value=!0)}function F(){S.value=!1,O()}function b(c,$,q){const V=new Date(q,$,c,0,0,0,0);if(e.ui.style===K.DatePickerSingleDate){j(V);return}switch(f.value){case x.SELECT_START:j(V);break;case x.SELECT_END:A(V);break;case x.COMPLETE:j(V);break}}function j(c){d.value=c.getDate(),v.value=c.getMonth()+1,h.value=c.getFullYear(),e.ui.style!==K.DatePickerDateRange?u.sendEvent(new se(e.ui.inputValue,0,X(),JSON.stringify({d:d.value,m:v.value,y:h.value}))):f.value=x.SELECT_END}function A(c){c.setHours(0,0,0,0);const $=new Date(h.value,v.value-1,d.value,0,0,0,0);c<$?(d.value=c.getDate(),v.value=c.getMonth()+1,h.value=c.getFullYear(),M.value=$.getDate(),y.value=$.getMonth()+1,o.value=$.getFullYear()):(M.value=c.getDate(),y.value=c.getMonth()+1,o.value=c.getFullYear()),f.value=x.COMPLETE}function Z(){switch(S.value=!1,e.ui.style){case K.DatePickerSingleDate:{u.sendEvent(new se(e.ui.inputValue,0,X(),JSON.stringify({d:d.value,m:v.value,y:h.value})));return}case K.DatePickerDateRange:{u.sendEvent(new ce(e.ui.inputValue,JSON.stringify({d:d.value,m:v.value,y:h.value}),e.ui.endInputValue,JSON.stringify({d:M.value,m:y.value,y:o.value}),0,X()));return}default:throw"unknown date picker style"}}return(c,$)=>c.ui.invisible?H("",!0):(m(),D("div",{key:0,class:"relative",style:Ee(C.value)},[R(He,{value:c.ui.value,label:c.ui.label,"error-text":c.ui.errorText,"supporting-text":c.ui.supportingText,disabled:c.ui.disabled,"datepicker-style":c.ui.style,"datepicker-expanded":S.value,"selected-start-year":h.value,"selected-start-month":v.value,"selected-start-day":d.value,"selected-end-year":o.value,"selected-end-month":y.value,"selected-end-day":M.value,"range-mode":c.ui.style===I(K).DatePickerDateRange,"input-value":c.ui.inputValue,"end-input-value":c.ui.endInputValue,onShowDatepicker:J},null,8,["value","label","error-text","supporting-text","disabled","datepicker-style","datepicker-expanded","selected-start-year","selected-start-month","selected-start-day","selected-end-year","selected-end-month","selected-end-day","range-mode","input-value","end-input-value"]),R(yt,{"datepicker-expanded":S.value,"range-mode":c.ui.style===I(K).DatePickerDateRange,label:c.ui.label,"selected-start-day":d.value,"selected-start-month":v.value,"selected-start-year":h.value,"selected-end-day":M.value,"selected-end-month":y.value,"selected-end-year":o.value,"range-selection-state":f.value,onClose:F,onSelect:b,onSubmitSelection:Z,onClearSelection:O},null,8,["datepicker-expanded","range-mode","label","selected-start-day","selected-start-month","selected-start-year","selected-end-day","selected-end-month","selected-end-year","range-selection-state"])],4))}});export{wt as default};
