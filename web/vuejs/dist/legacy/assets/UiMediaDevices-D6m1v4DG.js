import{d as D,u as M,r,m as h,c as g,o as I,U as c,f as d,M as y,p as s}from"./main-CIyeUeS_.js";const V=D({__name:"UiMediaDevices",props:{ui:{}},setup(p){const a=p,u=M(),o=r([]),t=r(!1);async function l(){var e,i;try{await navigator.mediaDevices.getUserMedia({audio:(e=a.ui.withAudio)!=null?e:!1,video:(i=a.ui.withVideo)!=null?i:!1}),t.value=!0}catch(n){t.value=!1,console.warn("Couldn't get requested permissions",n)}u.sendEvent(new c(a.ui.hasGrantedPermissions,0,d(),String(t.value)))}async function v(){const e=await navigator.mediaDevices.enumerateDevices();o.value=e.filter(m).map(w);const i=JSON.stringify(o.value);u.sendEvent(new c(a.ui.inputValue,0,d(),i))}function f(e){switch(e.kind){case"audioinput":return s.AudioInput;case"audiooutput":return s.AudioOutput;case"videoinput":return s.VideoInput}}function m(e){var i,n;if(!e.label||!e.deviceId||!e.groupId)return!1;switch(e.kind){case"audioinput":case"audiooutput":return(i=a.ui.withAudio)!=null?i:!1;case"videoinput":return(n=a.ui.withVideo)!=null?n:!1}}function w(e){return new y(e.deviceId,e.groupId,e.label,f(e))}return h(async()=>{await l(),t.value&&await v()}),(e,i)=>(I(),g("div"))}});export{V as default};
